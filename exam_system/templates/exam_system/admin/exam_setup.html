{% extends 'exam_system/base.html' %}

{% block title %}Exam Setup - Admin{% endblock %}

{% block content %}
<div class="card">
    <h2>Setup New Exam</h2>
    <p>Create a new exam with subject, dates, and timing.</p>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="subject">Select Subject:</label>
            <select name="subject" id="subject" required>
                <option value="">Choose subject...</option>
                {% for subject in subjects %}
                    <option value="{{ subject.id }}">{{ subject.code }} - {{ subject.name }} ({{ subject.semester.name }})</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="start_date">Start Date:</label>
            <input type="date" name="start_date" id="start_date" required>
        </div>
        
        <div class="form-group">
            <label for="end_date">End Date:</label>
            <input type="date" name="end_date" id="end_date" required>
        </div>
        
        <div class="form-group">
            <label for="start_time">Start Time:</label>
            <input type="time" name="start_time" id="start_time" required>
        </div>
        
        <div class="form-group">
            <label for="end_time">End Time:</label>
            <input type="time" name="end_time" id="end_time" required>
        </div>
        
        <div class="form-group">
            <label for="total_marks">Total Marks:</label>
            <input type="number" name="total_marks" id="total_marks" value="100" min="1" max="200" required>
        </div>
        
        <button type="submit" class="btn btn-success">Create Exam</button>
        <a href="{% url 'admin_dashboard' %}" class="btn">Back to Dashboard</a>
    </form>
</div>

<div class="card">
    <h3>Current Subjects</h3>
    {% if subjects %}
        <table class="table">
            <thead>
                <tr>
                    <th>Code</th>
                    <th>Name</th>
                    <th>Semester</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for subject in subjects %}
                <tr>
                    <td>{{ subject.code }}</td>
                    <td>{{ subject.name }}</td>
                    <td>{{ subject.semester.name }}</td>
                    <td>
                        {% if subject.is_active %}
                            <span style="color: green;">Active</span>
                        {% else %}
                            <span style="color: red;">Inactive</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No subjects available. Please create subjects first.</p>
    {% endif %}
</div>
{% endblock %}
